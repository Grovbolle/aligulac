(function(){if(!this.require){var t={},e={},n=function(i,a){var u,c=r(a,i),l=e[c];if(l)return l.exports;if(!(u=t[c]||t[c=r(c,"./index")]))throw"module '"+i+"' not found";l={id:c,exports:{}};try{return e[c]=l,u(l.exports,function(t){return n(t,o(c))},l),l.exports}catch(s){throw delete e[c],s}},r=function(t,e){var n,r,o=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var i=0,a=n.length;a>i;i++)r=n[i],".."==r?o.pop():"."!=r&&""!=r&&o.push(r);return o.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")};this.require=function(t){return n(t,"")},this.require.define=function(e){for(var n in e)t[n]=e[n]}}return this.require.define}).call(this)({aligulac:function(t,e){(function(){var n,r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t.Aligulac=n={init:function(){var t,n,r,o;return t=e("auto_complete").AutoComplete,n=e("common").Common,r=e("genshort").GenShort,o=e("menu").Menu,o.init(),t.init(),n.init(),r.init()},init_extra:function(t){var n,o,i,a;return a=t.split(" "),r.call(a,"eventmgr")>=0&&(o=e("eventmgr").EventMgr,o.init()),r.call(a,"eventres")>=0&&(i=e("eventres").EventRes,i.init()),r.call(a,"clocks")>=0?(n=e("clocks").Clocks,n.init()):void 0}}}).call(this)},auto_complete:function(t){(function(){var e,n,r,o,i,a,u;n=function(t){var e,n,r,o;if("--"===t.type)return t.key="-","<a>BYE</a>";if(null==t.tag&&null==t.name&&null==t.fullname)return"<span class='autocomp-header'>"+autocomp_strings[t.label]+"</span>";switch(t.type){case"player":return t.key=t.tag+" "+t.id,o=null!=t.teams&&t.teams.length>0?"<span class='autocomp-team pull-right'>"+t.teams[0][0]+"</span>":"",e=null!=t.country?"<img src='"+(flags_dir+t.country.toLowerCase())+".png' />":"",r="<img src='"+(races_dir+t.race.toUpperCase())+".png' />",n="<span>"+t.tag+"</span>","<a>"+e+r+n+o+"</a>";case"team":return t.key=t.name,"<a>"+t.name+"</a>";case"event":return t.key=t.fullname,"<a>"+t.fullname+"</a>"}return"<a>"+t.value+"</a>"},r=function(t,e){var n,r;return null==e?e=["players","teams","events"]:"string"==typeof e&&(e=[e]),n=$.Deferred(),r="/search/json/",$.ajax({type:"GET",url:r,dataType:"json",data:{q:t,search_for:e.join(",")}}).success(function(t){return n.resolve(t)}),n},u=function(){return $("#search_box").autocomplete({source:function(t,e){return $.when(r(t.term)).then(function(t){var n,r,o,i;return o=function(t,e,n){var r,o,i;if(null==t||0===t.length)return[];for(o=0,i=t.length;i>o;o++)r=t[o],r.type=e;return[{label:n}].concat(t)},r=o(t.players,"player","Players"),i=o(t.teams,"team","Teams"),n=o(t.events,"event","Events"),e(r.concat(i.concat(n)))})},minLength:2,select:function(t,e){return $("#search_box").val(e.item.key).closest("form").submit(),!1},open:function(){return $(".ui-menu").width("auto")}}).data("ui-autocomplete")._renderItem=function(t,e){return $("<li></li>").append(n(e)).appendTo(t)}},o=function(){try{return $(".event-ac").autocomplete({source:function(t,e){return $.when(r(t.term,"events")).then(function(t){var n,r,o,i;if(null==t||null==t.events||0===t.events.length)return[];for(i=t.events,r=0,o=i.length;o>r;r++)n=i[r],n.type="event";return e(t.events)})},minLength:2,select:function(t,e){return $(".event-ac").val(e.item.key),!1},open:function(){return $(".ui-menu").width("auto")}}).data("ui-autocomplete")._renderItem=function(t,e){return $("<li></li>").append(n(e)).appendTo(t)}}catch(t){}},a=function(){var t;return t=$("#id_players"),t.tagsInput({autocomplete_opt:{minLength:2,select:function(e,n){return t.addTag(n.item.key),$("#id_players_tag").focus(),!1},open:function(){return $(".ui-menu").width("auto")}},autocomplete_url:function(t,e){return $.when(r(t.term,"players")).then(function(n){var r,o,i,a;if(null!=n.players){for(a=n.players,o=0,i=a.length;i>o;o++)r=a[o],r.type="player";return!global_player_autocomplete_allow_byes||"bye"!==t.term&&"--"!==t.term||(n.players=[{type:"--"}].concat(n.players)),e(n.players)}})},defaultText:autocomp_strings.Players,placeholderColor:"#9e9e9e",delimiter:"\n",width:"100%",formatAutocomplete:n}),$("#id_players_addTag").keydown(function(t){return 13===t.which&&""===$("#id_players_tag").val()?$(this).closest("form").submit():void 0})},i=function(){return $("input#id_players_tag").focus(function(){return $(this).parent().parent().css("box-shadow","inset 0 1px 1px rgba(0,0,0,.075), 0 0 4px rgba(0,0,0,.4)").css("-webkit-box-shadow","inset 0 1px 1px rgba(0,0,0,.075), 0 0 4px rgba(0,0,0,.4)").css("border-color","#000000")}).focusout(function(){return $(this).parent().parent().css("box-shadow","inset 0 1px 1px rgba(0,0,0,.075)").css("-webkit-box-shadow","inset 0 1px 1px rgba(0,0,0,.075)").css("border-color","#cccccc")})},t.AutoComplete=e={init:function(){return u(),o(),a(),i()}}}).call(this)},clocks:function(t,e,n){(function(){var t,e;e=function(t){return $(t).next().toggle(),$(t).find(".clock-toggle").toggleClass("right-caret").toggleClass("down-caret")},n.exports.Clocks=t={init:function(){return $(".clock-expandable").click(function(){return e(this)})}}}).call(this)},common:function(t,e,n){(function(){var t,e,r,o,i,a,u;i=function(t){return $(".lm[data-id="+t+"]").toggle(),$(".lma[data-id="+t+"]").html($(".lma[data-id="+t+"]").html()===autocomp_strings.hide?autocomp_strings.show:autocomp_strings.hide),!1},o=function(t){return $("#fix"+t).toggle(),$("#inp"+t).toggle(),$("#"+t+"_1").focus(),!1},e=function(){return $('input[name|="match"]').prop("checked",!0),!1},a=function(){return $('input[name|="match"]').prop("checked",!1),!1},r=function(t){return $("input[data-match="+t+"]").prop("checked",!0),!1},u=function(t){return $("input[data-match="+t+"]").prop("checked",!1),!1},n.exports.Common=t={init:function(){return $(".lma").click(function(){return i($(this).data("id"))}),$(".lmp").click(function(){return o($(this).data("id"))}),$(".check-boxes-btn").click(function(){return r($(this).data("match"))}),$(".uncheck-boxes-btn").click(function(){return u($(this).data("match"))}),$(".check-all-btn").click(e),$(".uncheck-all-btn").click(a)}}}).call(this)},eventmgr:function(t,e,n){(function(){var t,e;e=function(t,e,n){return $("#parent_id_field").val(t),$("#id_type").val(function(){switch(n){case"round":return"round";case"event":return"round";case"category":return"category"}}()),$("#parent_name").html(e),$("#md-eventmgr").modal()},n.exports.EventMgr=t={init:function(){return $(".tree-toggle").click(function(){return $(this).parent().parent().next(".subtree").toggle(100),!1}),$("#root_btn").click(function(){return $("input[id=parent_id_field]").val("-1"),$("#parent_name").html("Root (N/A)"),$("#md-eventmgr").modal(),!1}),$("#showguide").click(function(){return $("#guide").collapse(),$("#showguide").toggle()}),$(".event-modify-button").click(function(){var t,n,r;return n=$(this).data("event-fullname"),t=$(this).data("event-id"),r=$(this).data("event-type"),e(t,n,r)}),$("#id_predef_names").change(function(){return $("#id_predef_names").prop("selectedIndex")>0?($("#id_custom_names").val(""),$("#id_type").val("round")):void 0}),$("#id_custom_names").keypress(function(){return""!==$("#id_custom_names").val()?$("#id_predef_names").prop("selectedIndex",0):void 0})}}}).call(this)},eventres:function(t,e,n){(function(){var t,e,r,o;e=function(){var t,e;return e=$("#extantstories").prop("selectedIndex"),t=story_data[e],$("#story_id").prop("value",t.idx),$("#id_player").prop("value",t.player),$("#st_date").datepicker("setDate",t.dt),$("#id_text").prop("selectedIndex",t.text),$("#id_params").prop("value",t.params),$("#storynewbtn").prop("disabled",e>0),$("#storyupdbtn").prop("disabled",0===e),$("#storydelbtn").prop("disabled",0===e)},r=function(){var t;return t=$("#sortable").sortable("toArray"),$("#order").prop("value",t.join(","))},o=function(t){return $("[data-placement="+t+"]").toggle(),!1},n.exports.EventRes=t={init:function(){return $(".pp_showbtn").click(function(){return o($(this).data("placement"))}),"undefined"!=typeof admin&&null!==admin&&admin&&("undefined"!=typeof story_data&&null!==story_data&&$("#extantstories").change(e),"undefined"!=typeof has_children&&null!==has_children&&has_children)?($("#sortable").sortable(),$("#sortable").disableSelection(),$("#submit-order").click(r)):void 0}}}).call(this)},genshort:function(t,e,n){(function(){var t,e;e=function(t){return $.get("/m/new/?url="+encodeURIComponent(t),function(t){return $("#gen_short").hide(),$("#disp_short").html('<a href="/m/'+t+'/">/m/'+t+"</a>"),$("#disp_short").show()})},n.exports.GenShort=t={init:function(){return $("#gen_short").click(function(){return e(location.href)})}}}).call(this)},menu:function(t,e,n){(function(){var t,e,r;e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i,r=function(){return e.test(navigator.userAgent)||$(window).width()<=768?$("a.dropdown-toggle").off("click"):$("a.dropdown-toggle").on("click",function(){return window.location.href=this.href})},n.exports.Menu=t={init:function(){return $(document).ready(r),$(window).resize(r)}}}).call(this)}});