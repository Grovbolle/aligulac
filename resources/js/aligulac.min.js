var aligulacAutocompleteTemplates,getResults;aligulacAutocompleteTemplates=function(e){var t,n,r,a;if("--"===e.type)return e.key="-","<a>BYE</a>";if(null==e.tag&&null==e.name&&null==e.fullname)return"<span class='autocomp-header'>"+autocomp_strings[e.label]+"</span>";switch(e.type){case"player":return e.key=e.tag+" "+e.id,a=null!=e.teams&&e.teams.length>0?"<span class='autocomp-team pull-right'>"+e.teams[0][0]+"</span>":"",t=null!=e.country?"<img src='"+(flags_dir+e.country.toLowerCase())+".png' />":"",r="<img src='"+(races_dir+e.race.toUpperCase())+".png' />",n="<span>"+e.tag+"</span>","<a>"+t+r+n+a+"</a>";case"team":return e.key=e.name,"<a>"+e.name+"</a>";case"event":return e.key=e.fullname,"<a>"+e.fullname+"</a>"}return"<a>"+e.value+"</a>"},getResults=function(e,t){var n,r;return null==t?t=["players","teams","events"]:"string"==typeof t&&(t=[t]),n=$.Deferred(),r="/search/json/",$.ajax({type:"GET",url:r,dataType:"json",data:{q:e,search_for:t.join(",")}}).success(function(e){return n.resolve(e)}),n},$(document).ready(function(){return $("#search_box").autocomplete({source:function(e,t){return $.when(getResults(e.term)).then(function(e){var n,r,a,o;return a=function(e,t,n){var r,a,o;if(null==e||0===e.length)return[];for(a=0,o=e.length;o>a;a++)r=e[a],r.type=t;return[{label:n}].concat(e)},r=a(e.players,"player","Players"),o=a(e.teams,"team","Teams"),n=a(e.events,"event","Events"),t(r.concat(o.concat(n)))})},minLength:2,select:function(e,t){return $("#search_box").val(t.item.key).closest("form").submit(),!1},open:function(){return $(".ui-menu").width("auto")}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li></li>").append(aligulacAutocompleteTemplates(t)).appendTo(e)}}),$(document).ready(function(){try{return $(".event-ac").autocomplete({source:function(e,t){return $.when(getResults(e.term,"events")).then(function(e){var n,r,a,o;if(null==e||null==e.events||0===e.events.length)return[];for(o=e.events,r=0,a=o.length;a>r;r++)n=o[r],n.type="event";return t(e.events)})},minLength:2,select:function(e,t){return $(".event-ac").val(t.item.key),!1},open:function(){return $(".ui-menu").width("auto")}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li></li>").append(aligulacAutocompleteTemplates(t)).appendTo(e)}}catch(e){}}),$(document).ready(function(){var e;return e=$("#id_players"),e.tagsInput({autocomplete_opt:{minLength:2,select:function(t,n){return e.addTag(n.item.key),$("#id_players_tag").focus(),!1},open:function(){return $(".ui-menu").width("auto")}},autocomplete_url:function(e,t){return $.when(getResults(e.term,"players")).then(function(n){var r,a,o,l;if(null!=n.players){for(l=n.players,a=0,o=l.length;o>a;a++)r=l[a],r.type="player";return!global_player_autocomplete_allow_byes||"bye"!==e.term&&"--"!==e.term||(n.players=[{type:"--"}].concat(n.players)),t(n.players)}})},defaultText:autocomp_strings.Players,placeholderColor:"#9e9e9e",delimiter:"\n",width:"100%",formatAutocomplete:aligulacAutocompleteTemplates}),$("#id_players_addTag").keydown(function(e){return 13===e.which&&""===$("#id_players_tag").val()?$(this).closest("form").submit():void 0})}),$(document).ready(function(){return $("input#id_players_tag").focus(function(){return $(this).parent().parent().css("box-shadow","inset 0 1px 1px rgba(0,0,0,.075), 0 0 4px rgba(0,0,0,.4)").css("-webkit-box-shadow","inset 0 1px 1px rgba(0,0,0,.075), 0 0 4px rgba(0,0,0,.4)").css("border-color","#000000")}).focusout(function(){return $(this).parent().parent().css("box-shadow","inset 0 1px 1px rgba(0,0,0,.075)").css("-webkit-box-shadow","inset 0 1px 1px rgba(0,0,0,.075)").css("border-color","#cccccc")})});var toggle_block;toggle_block=function(e){return $("#lm-"+e).toggle(),$("#lma-"+e).html($("#lma-"+e).html()===autocomp_strings.hide?autocomp_strings.show:autocomp_strings.hide)};var gen_short;gen_short=function(e){return $.get("/m/new/?url="+encodeURIComponent(e),function(e){return $("#gen_short").hide(),$("#disp_short").html('<a href="/m/'+e+'/">/m/'+e+"</a>"),$("#disp_short").show()})};var mobile_regex,toggle_navbar_method;mobile_regex=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i,toggle_navbar_method=function(){return mobile_regex.test(navigator.userAgent)||$(window).width()<=768?$("a.dropdown-toggle").off("click"):$("a.dropdown-toggle").on("click",function(){return window.location.href=this.href})},$(document).ready(toggle_navbar_method),$(window).resize(toggle_navbar_method);